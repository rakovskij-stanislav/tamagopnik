# tamagopnik

**Привет!** Этот документ является публичным документом игры “Тамагопник”, проекта за авторством Раковского Станислава. Сюжет игры является общественным достоянием пользователей Интернета и может быть использован в любых целях, за исключением коммерческих.


Позвольте прояснить **некоторые правила по пользованию**:

1. Файлы представляет собой текст игры “Тамагопник”, в которую можно поиграть, разговаривая с телеграм-ботом : ТЫК
2. Настоятельно не рекомендуется заниматься вандализмом.
3. У тебя есть предложение, как сделать игру лучше? Нашел баг, опечатку? Есть идеи по улучшению движка? Отлично! Создавай "проблему\issue", делай pool request, если нет аккаунта гитхаб - пиши на почту rakovskij.stanislav@gmail.com, будет обязательно рассмотрено.


**Немного о себе**:
Меня зовут Станислав Раковский, студент первого курса. Интересуюсь высоконагруженными системами, многопользовательскими приложениями. Пишу на Python, знаю Pascal (стандартный набор школьника, я полагаю). Пользователь ubuntu, увлекаюсь компьютерами.

**Зачем это мне**:

1. Мне нравится смотреть на железо в работе. Я много поэкспериментировал в питоне, теперь хотелось бы посмотреть, каково оно - неудержимый поток людей.
2. Посмотреть, как можно оптимизировать вещи. Мне очевидно, что мой код на питоне может и не конфетка. Я смогу услышать идеи по оптимизации движка от профессионалов своего дела. Это поможет стать мне лучше.
3. Можно будет хоть что-нибудь написать в резюме) Например, “несколько месяцев бесстрашно был дланью Воли Рунета” 

**Немного о движке**:
На самом деле, писал его я всего лишь дня три в перерывах. В нем (в 0.1 версии) не более 200 строк кода. Сам код движка можно посмотреть в файлах проекта. Используется Python, telebot, в скором времени напишу на tk простенький интерфейс для того, чтобы смотреть за онлайном.

Попробую объяснить, не используя специфичной терминологии (этому отведен файл README.md)

Основным объектом игры являются **классы - румы (room)**. Внутри комнат находятся т.н. **квесты**. Квест состоит из одного или нескольких **действий**.

Например, существует комната roomdvor. В ней есть квест quest2, который содержит в себе два действия : вывести текст и дать игроку выбор ответа.

Всего есть **9 типов действий**, которые различает движок :

- *plain_text* - обычный текст, который выводится игроку;
- *choose* - выводит игроку один или несколько типов ответа на выбор. За самими ответами кроется выбор новой линии квеста;
- *goto* A B - переносит нить повествования в квест B, находящийся в руме A;
- *end* text - стирает информацию об аккаунте игрока, таким образом игроку придется заново начать игру. Следует применять в конце игры. Выводит текст text. Думаю, стирание персонажа в случае грубой ошибки нужно считать дурным тоном, намного лучше просто перенести игрока немного назад (в демке явно представлено, что даже грубое нарушение правил богини не ведет к смерти);
- *take* X (Y) - кладет игроку предмет Х в инвентарь и выводит текст Y, если он определен. Полагаю, можно использовать в качестве чекпоинтов по прохождению квеста (поговорил ли игрок с Петей, прежде чем отправиться к Бате?). Верные спутники - drop и item_exist;
- *drop* X (Y) - выбрасывает вещь X из инвентаря и выводит текст Y, если он определен. В случае, если предмета нет, выводит исключение, которое не позволяет играть дальше;
- *item_exist* X quest1 quest2 - если вещь X есть в инвентаре, начинает quest1 в текущей руме, иначе - quest2;
- *random* X Y Z… - выбирает случайным образом один из квестов. Схоже с choose, но выбор полностью лежит на ладонях рандома;
- *compile* - предоставляет средства улучшенного вывода текста, используя функции работы с текстом в Python.

**Файлы проекта** :

- application.py - главный файл программы. Содержит в себе движок.
- db.py - содержит в себе классы для баз данных, которые пока просто являются обертками для массивов. В будущем планируется выбрать, к примеру sqlite или MySql и хранить в этом модуле обертку для них (благо, основы sql баз данных будут во втором семестре).
- extra.py - хранит текст игры в виде, который воспринимает движок. Некоторые реплики могут незначительно отличаться в “человеческом” варианте и в файле extra, сделано ради удобства (например, разделения с помощью односложных choose для того, чтобы текст просто не сыпался на человека сплошным потоком)
- сценарий.txt - файл сценария. Как раз его я переношу в extra.py
- config.py - файл, в котором храню пароль от бота. Вынесен в отдельный файл в целях безопасности.
- about.md - этот файл. Определяет правила работы с проектом, 
- README.MD - файл, объясняющий техническую часть работы 

**Как будут выходить обновления** :
Думаю, несколько раз в неделю я буду просматривать гитхаб и почту, отвечать на всё, после этого вносить изменения в код и сценарий. Если кто-нибудь будет еще и адаптировать тексты топовых сценариев в вид, который движку будет понятен, я просто расплачусь от радости)
